<div class="presences-widget registers" ng-controller="PresencesController as vm">
    <h2>
        <i18n>presences.widgets.day_presences</i18n>
    </h2>

    <!-- presence list -->
    <div class="presences-cards row card-slider">
        <div class="card cell" ng-repeat="presence in vm.presences.all" data-ng-click="vm.openPresence(presence)">
            <div class="row hour">[[::vm.formatHour(presence.startDate)]] -
                [[::vm.formatHour(presence.endDate)]]
            </div>
            <div class="row classes ellipsis">
                <span>[[::presence.discipline.label]]</span>
            </div>

            <!-- several students -->
            <span class="row subject" data-ng-show="presence.markedStudents.length > 1">
                [[::presence.markedStudents.length]] <i18n>presences.students</i18n>
            </span>

            <!-- only one student -->
            <span class="row subject" data-ng-show="presence.markedStudents.length === 1">
                [[::presence.markedStudents.length]] <i18n>presences.student</i18n>
            </span>
        </div>
    </div>

    <!-- lightbox edit/check presence -->
    <sniplet workflow="presences.createPresences" template="presence-form" application="presences"></sniplet>


    <!-- empty state -->
    <div class="card-slider empty-state" data-ng-show="vm.presences.all.length === 0">
        <div class="tick-color red">&nbsp;</div>
        <div class="empty-title">
            <i18n>presences.widgets.day.presences.empty</i18n>
        </div>
        <div class="tick-color purple">&nbsp;</div>
    </div>
</div>