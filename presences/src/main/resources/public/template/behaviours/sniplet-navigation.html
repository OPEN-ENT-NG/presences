<div class="sniplet presences">
    <nav role="navigation" aria-label="main navigation">
        <!-- main nav -->
        <div class="nav">
            <div class="items">
                <div role="menuitem" ng-if="structures.length > 1"
                     class="item structure-choice-item"
                     data-ng-click="hoverIn('STRUCTURES')"
                     data-ng-mouseover="hoverIn('STRUCTURES')"
                     data-ng-mouseleave="hoverOut()">
                    <i class="open-right">&nbsp;</i>
                </div>
                <a role="menuitem" href="/presences#/dashboard" class="item"
                   ng-class="{active: getCurrentState() === 'dashboard'}">
                    <i class="presence-home" aria-hidden="true"></i>
                    <span class="label-navbar">
                        <i18n>presences.home</i18n>
                    </span>
                </a>
                <a role="menuitem" class="item"
                   ng-if="::hasRight('readRegister')"
                   ng-class="{active: getCurrentState() === 'registers'}"
                   href="/presences#/registers">
                    <i class="register" aria-hidden="true"></i>
                    <span class="label-navbar">
                        <i18n>presences.register</i18n>
                    </span>
                </a>
                <div role="menuitem" class="item"
                     ng-class="{active: getCurrentState() === 'exemptions'}"
                     ng-if="::hasOneOfEventTabRight()"
                     data-ng-click="hoverIn('ABSENCES')"
                     data-ng-mouseover="hoverIn('ABSENCES')"
                     data-ng-mouseleave="hoverOut()">
                    <i class="absence" aria-hidden="true"></i>
                    <span class="label-navbar">
                        <i18n>presences.events.title</i18n>
                    </span>
                </div>
                <!-- PrÃ©sences -->
                <a role="menuitem" href="/presences#/presences" class="item"
                   ng-if="hasRight('readPresences') || hasRight('readPresencesRestricted')"
                   ng-class="{active: getCurrentState() === 'presences'}">
                    <i class="presence" aria-hidden="true"></i>
                    <span class="label-navbar">
                        <i18n>presences.title</i18n>
                    </span>
                </a>
                <div role="menuitem" class="item"
                     ng-if="hasIncidentRight('access') || hasIncidentRight('readPunishment') || hasIncidentRight('readSanction')"
                     ng-class="{active: getCurrentState() === 'incidents'}"
                     data-ng-click="hoverIn('INCIDENTS')"
                     data-ng-mouseover="hoverIn('INCIDENTS')"
                     data-ng-mouseleave="hoverOut()">
                    <i class="events" aria-hidden="true"></i>
                    <span class="label-navbar">
                        <i18n>presences.incidents</i18n>
                    </span>
                </div>
                <a role="menuitem" ng-if="hasMassmailingRight('access') || hasMassmailingRight('viewRestricted')"
                   ng-class="{active: getCurrentPathState() === 'massmailing'}"
                   class="item"
                   href="/massmailing#/">
                    <i class="mass-mailing" aria-hidden="true"></i>
                    <span class="label-navbar" ng-if="hasMassmailingRight('access') || hasMassmailingRight('viewRestricted')">
                        <i18n>presences.publipostage</i18n>
                    </span>
                </a>
                <a role="menuitem" ng-if="::hasStatisticsRight('access')"
                   ng-class="{active: getCurrentPathState() === 'statistics-presences'}"
                   class="item" href="/statistics-presences#/">
                    <i class="statistics-presences" aria-hidden="true"></i>
                    <span class="label-navbar" ng-if="::hasStatisticsRight('access')">
                        <i18n>presences.statistics</i18n>
                    </span>
                </a>
            </div>
        </div>

        <!-- all sub nav -->
        <div class="sub-nav" role="navigation" aria-label="sub navigation">
            <div class="items">
                <!-- structures -->
                <div class="item structure-choice-item">
                    <div class="sub-items" data-ng-mouseover="hoverIn('STRUCTURES')"
                         data-ng-mouseleave="hoverOut()"
                         ng-class="{hovered: menu.hovered === 'STRUCTURES'}">
                        <h2>
                            <i18n>presences.structures</i18n>
                        </h2>
                        <div class="sub-items-structure">
                            <div ng-repeat="structure in structures" class="sub-item"
                                 ng-class="{active: menu.structure.id === structure.id}"
                                 data-ng-click="setStructure(structure)">
                                <i>&nbsp;</i><span>[[structure.name]]</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- home -->
                <div class="item"></div>

                <!-- registers -->
                <div class="item"></div>

                <!-- events-->
                <div class="item" ng-if="::hasOneOfEventTabRight()">
                    <div class="sub-items" ng-class="{hovered: menu.hovered === 'ABSENCES'}"
                         data-ng-mouseover="hoverIn('ABSENCES')"
                         data-ng-mouseleave="hoverOut()">
                        <h2>
                            <i18n>presences.events.title</i18n>
                        </h2>
                        <a href="/presences#/events" class="sub-item"
                           ng-if="::(hasRight('readEvent') || hasRight('readEventRestricted'))">
                            <i class="absence" aria-hidden="true"></i>
                            <span><i18n>presences.navigation.event.list</i18n></span>
                        </a>
                        <a href="/presences#/alerts" class="sub-item" ng-if="::hasRight('widget_alerts')">
                            <i class="alertes" aria-hidden="true"></i>
                            <span><i18n>presences.alerts.title</i18n></span>
                        </a>
                        <!-- sub nav statements absences -->
                        <a href="/presences#/statements-absences"
                           ng-if="::(hasRight('manageStatementAbsences') || hasRight('manageStatementAbsencesRestricted'))"
                           class="sub-item">
                            <i class="testimony" aria-hidden="true"></i>
                            <span><i18n>presences.navigation.statements.online</i18n></span>
                        </a>
                        <a href="/presences#/exemptions"
                           ng-if="::(hasRight('readExemption') || hasRight('readExemptionRestricted'))"
                           ng-class="{active: getCurrentState() === 'exemptions'}"
                           class="sub-item">
                            <i class="permission" aria-hidden="true"></i>
                            <span><i18n>presences.navigation.exemption</i18n></span>
                        </a>
                        <a href="/presences#/collective-absences"
                           ng-if="::hasRight('manageCollectiveAbsences')"
                           ng-class="{active: getCurrentState() === 'collective-absences'}"
                           class="sub-item">
                            <i class="collective-absences" aria-hidden="true"></i>
                            <span><i18n>presences.navigation.absence.collective</i18n></span>
                        </a>
                    </div>
                </div>

                <!-- presences -->
                <div class="item"></div>

                <!-- incidents -->
                <div class="item">
                    <div class="sub-items" ng-class="{hovered: menu.hovered === 'INCIDENTS'}"
                         ng-if="hasIncidentRight('access') || hasIncidentRight('readPunishment') || hasIncidentRight('readSanction')"
                         data-ng-mouseover="hoverIn('INCIDENTS')"
                         data-ng-mouseleave="hoverOut()">
                        <h2>
                            <i18n>incidents.navigation.management</i18n>
                        </h2>
                        <!-- sub nav incident -->
                        <a class="sub-item"
                           href="/incidents#/incidents"
                           ng-if="::hasIncidentRight('access')"
                           ng-class="{active: getCurrentState() === 'incidents'}">
                            <i class="incident" aria-hidden="true"></i>
                            <span><i18n>incidents.title</i18n></span>
                        </a>
                        <!-- sub nav punishment/sanction -->
                        <a class="sub-item"
                           href="/incidents#/punishment/sanction"
                           ng-if="hasIncidentRight('readPunishment') || hasIncidentRight('readSanction')"
                           ng-class="{active: getCurrentState() === 'punishment/sanction'}">
                            <i class="punishment" aria-hidden="true"></i>
                            <span><i18n>incidents.navigation.punishment.sanction</i18n></span>
                        </a>
                    </div>
                </div>
                <!-- massmailing -->
                <div class="item" ng-if="::hasMassmailingRight('access')"></div>

                <!-- statistics -->
                <div class="item" ng-if="::hasStatisticsRight('access')"></div>
            </div>
        </div>
    </nav>
</div>